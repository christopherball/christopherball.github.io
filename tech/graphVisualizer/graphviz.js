/* docs/graphviz.js 1.0.7 */
!function(e){"use strict";var t,r,n,i,o,a,s,d=void 0!==d?d:"undefined"!=typeof window?window:this;function l(){return"devicePixelRatio"in window&&window.devicePixelRatio>1?window.devicePixelRatio:1}console.log.bind(console),Object.defineProperty(e,"__esModule",{value:!0}),t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){var r,n;for(r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=Object.assign||function(e){var t,r,n;for(t=1;t<arguments.length;t++)for(n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e},o=function(){function e(t){var n=this;r(this,e),this.worker=t,this.listeners=[],this.nextId=0,this.worker.addEventListener("message",function(e){var t=e.data.id,r=e.data.error,i=e.data.result;n.listeners[t](r,i),delete n.listeners[t]})}return n(e,[{key:"render",value:function(e,t){var r=this;return new Promise(function(n,i){var o=r.nextId++;r.listeners[o]=function(e,t){e?i(new Error(e.message,e.fileName,e.lineNumber)):n(t)},r.worker.postMessage({id:o,src:e,options:t})})}}]),e}(),a=function e(t,n){r(this,e);var i=t();this.render=function(e,t){return new Promise(function(r,o){try{r(n(i,e,t))}catch(e){o(e)}})}},s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.workerURL,i=t.worker,s=t.Module,d=t.render;if(r(this,e),void 0!==n)this.wrapper=new o(new Worker(n));else if(void 0!==i)this.wrapper=new o(i);else if(void 0!==s&&void 0!==d)this.wrapper=new a(s,d);else{if(void 0===e.Module||void 0===e.render)throw new Error("Must specify workerURL or worker option, Module and render options, or include one of full.render.js or lite.render.js after viz.js.");this.wrapper=new a(e.Module,e.render)}}return n(e,[{key:"renderString",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.format,i=void 0===n?"svg":n,o=r.engine,a=void 0===o?"dot":o,s=r.files,d=void 0===s?[]:s,l=r.images,c=void 0===l?[]:l,u=r.yInvert,h=void 0!==u&&u,f=r.nop,m=void 0===f?0:f;for(t=0;t<c.length;t++)d.push({path:c[t].path,data:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg width="'+c[t].width+'" height="'+c[t].height+'"></svg>'});return this.wrapper.render(e,{format:i,engine:a,files:d,images:c,yInvert:h,nop:m})}},{key:"renderSVGElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.renderString(e,i({},t,{format:"svg"})).then(function(e){return(new DOMParser).parseFromString(e,"image/svg+xml").documentElement})}},{key:"renderImageElement",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.scale,o=r.mimeType,a=r.quality;return this.renderString(e,i({},r,{format:"svg"})).then(function(e){return"object"===("undefined"==typeof fabric?"undefined":t(fabric))&&fabric.loadSVGFromString?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.scale,n=void 0===r?l():r,i=t.mimeType,o=void 0===i?"image/png":i,a=t.quality,s=void 0===a?1:a,d=n,c=void 0;return"image/jpeg"==o?c="jpeg":"image/png"==o&&(c="png"),new Promise(function(t,r){fabric.loadSVGFromString(e,function(e,n){var i,o,a,l;0==e.length&&r(new Error("Error loading SVG with Fabric")),(i=document.createElement("canvas")).width=n.width,i.height=n.height,o=new fabric.Canvas(i,{enableRetinaScaling:!1}),a=fabric.util.groupSVGElements(e,n),o.add(a).renderAll(),(l=new Image).src=o.toDataURL({format:c,multiplier:d,quality:s}),l.width=n.width,l.height=n.height,t(l)})})}(e,{scale:n,mimeType:o,quality:a}):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.scale,n=void 0===r?l():r,i=t.mimeType,o=void 0===i?"image/png":i,a=t.quality,s=void 0===a?1:a;return new Promise(function(t,r){var i=new Image;i.onload=function(){var e=document.createElement("canvas");e.width=i.width*n,e.height=i.height*n,e.getContext("2d").drawImage(i,0,0,e.width,e.height),e.toBlob(function(e){var r=new Image;r.src=URL.createObjectURL(e),r.width=i.width,r.height=i.height,t(r)},o,s)},i.onerror=function(e){var t;t="error"in e?e.error:new Error("Error loading SVG"),r(t)},i.src="data:image/svg+xml;base64,"+btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))})}(e,{scale:n,mimeType:o,quality:a})})}},{key:"renderJSONObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.format;return"json"===r&&"json0"===r||(r="json"),this.renderString(e,i({},t,{format:r})).then(function(e){return JSON.parse(e)})}}]),e}();const c="1.0.7",u=new Error("timeout"),h=(e=>{let t=(e?e.src:"").match(/^[^\?]+\//);return t?t[0]:"https://rsms.me/graphviz/"})(document.currentScript),f=-1!=document.location.pathname.indexOf("iframe-proxy.html")||document.location.protocol in{"http:":1,"https:":1}?null:new class{constructor(){this.nextTrID=0,this.trans=new Map;const e=setTimeout(()=>{this.reject(new Error("proxy timeout"))},3e4);this.loadp=new Promise((t,r)=>{this.resolve=(()=>{(Date.now()-0).toFixed(0),clearTimeout(e),t()}),this.reject=(e=>{r(e)})}),window.addEventListener("message",e=>{e.data;let t=e.data;if(t&&"object"==typeof t)switch(t.type){case"graphviz.proxy.ready":e.stopPropagation(),this.resolve();break;case"graphviz.proxy.response":{let r=this.trans.get(t.trid);r&&(this.trans.delete(t.trid),t.error?r.reject(new Error(String(t.error))):r.resolve(t.result)),e.stopPropagation();break}}}),this.createIframe()}transaction(e){return this.loadp.then(()=>new Promise((t,r)=>{let n={id:this.nextTrID++,resolve:t,reject:r};this.trans.set(n.id,n),this.w.postMessage({...e,trid:n.id},"*")}))}layout(e,t,r,n){return this.transaction({type:"layout",args:[e,t,r,n]})}createIframe(){let e=h+"iframe-proxy.html?v="+c,t=this.iframe=document.createElement("iframe");t.style.position="fixed",t.style.visibility="hidden",t.style.pointerEvents="none",t.src=e,t.sandbox="allow-same-origin allow-scripts allow-popups allow-forms allow-modals",t.border="0",document.documentElement.appendChild(t),this.w=t.contentWindow,this.w}},m=f?f.layout.bind(f):(()=>{let e;function t(){e&&e.wrapper.worker.terminate(),(e=new s({workerURL:h+"viz-worker.js?v="+c})).renderString("digraph G {}",{format:"svg",engine:"dot"}).catch(()=>{})}return t(),(r,n,i,o)=>new Promise((a,s)=>{let d;return o&&o>0&&(d=setTimeout(()=>{t(),s(u)},o)),e.renderString(r,{format:n||"svg",engine:i||"dot"}).then(a).catch(e=>{clearTimeout(d),t(),s(e)})})})();e.TimeoutError=u,e.layout=m,e.version=c}("undefined"!=typeof exports?exports:("undefined"!=typeof global?global:"undefined"!=typeof self?self:this).graphviz={});
//#sourceMappingURL=graphviz.js.map
